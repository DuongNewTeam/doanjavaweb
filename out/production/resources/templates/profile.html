<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header-css">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tin tức-Siêu thị thể thao Online</title>

</head>

<link rel="stylesheet" type="text/css" th:href="@{/css/profile.css}"/>
<body data-spy="scroll" data-offset="0">

<div th:replace="fragments/header :: header (vm=${vm})"></div>

<div class="container" style="margin-bottom:20px; clear: both">
    <section class="content">
        <ul class="nav nav-pills menu-bar">
            <li class="active"><a data-toggle="pill" href="#home">Thông tin cá nhân</a></li>
            <li><a data-toggle="pill" href="#menu1">Danh sách đơn hàng</a></li>
            <li><a data-toggle="pill" href="#menu2">Gửi phản hồi</a></li>
        </ul>

        <div class="tab-content" th:if="${user != null}">
            <div id="home" class="tab-pane fade in active">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-xs-12 col-md-offset-0">
                            <div class="panel panel-info">
                                <div class="panel panel-heading">
                                    <h3 class="panel-title", style="font-weight: bold" th:text="${user.getUsername()}"></h3>
                                </div>
                                <div class="panel panel-body">
                                    <div class="row">
                                        <div class="col-md-4 col-lg-4" align="center">
                                            <div class="user_avatar">
                                                <a class="user-avatar__link" th:href="@{'~/user/' + ${user.getId()}}">
                                                    <img th:src="${user.getImage()}" alt="" style="width: 250px; height: 250px">
                                                </a>
                                            </div>
                                        </div>
                                        <div class="col-md-8 col-lg-8 col-xs-12">
                                            <table class="table table-striped" style="width: 100%">
                                                <thead>
                                                <tr>
                                                    <th colspan="2"><p class ="member-info">Thông tin cá nhân</p></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td class="spec-title">
                                                        <i class="fa fa-user"></i>
                                                        Họ và tên :
                                                    </td>
                                                    <td class="spec-content">
                                                        <span th:text="${user.getRealname()}"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="spec-title">
                                                        <i class="fa fa-user"></i>
                                                        Giới tính :
                                                    </td>
                                                    <td class="spec-content">
                                                        <span th:text="${user.getGender()}"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="spec-title">
                                                        <i class="fa fa-home"></i>
                                                        Địa chỉ :
                                                    </td>
                                                    <td class="spec-content">
                                                        <span th:text="${user.getAddress()}"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="spec-title">
                                                        <i class="fa fa-phone"></i>
                                                        Số điện thoại :
                                                    </td>
                                                    <td class="spec-content">
                                                        <span th:text="${user.getPhone()}"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="spec-title">
                                                        <i class="fa fa-envelope"></i>
                                                        Email :
                                                    </td>
                                                    <td class="spec-content">
                                                        <a th:href="mailto + ${user.getEmail()}" th:text="${user.getEmail()}"></a>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-footer">
                                    <a data-original-title="Broadcast Message" data-toggle="tooltip" type="button"
                                       class="btn btn-sm btn-primary"><i class="glyphicon glyphicon-envelope"></i> Gửi thư</a>
                                    <span class="pull-right">
                                            <button data-original-title="Edit this user" data-toggle="tooltip"
                                                    type="button" class="btn btn-sm btn-warning" id="button-edit-info"
                                                    th:attr="data-user=${user.getId()}">
                                                <i class="glyphicon glyphicon-edit"></i> Chỉnh sửa
                                            </button>
                                        </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="menu1" class="tab-pane fade">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-xs-12 col-md-offset-0">
                            <div class="panel panel-info">
                                <div class="panel panel-heading">
                                    <h3 class="panel-title" style="font-weight: bold">Danh sách sản phẩm đã đặt</h3>
                                </div>
                                <div class="panel panel-body">
                                    <table class="table table-striped table-hover table-bordered table-list-orders"
                                           >
                                        <thead>
                                        <tr>
                                            <th colspan="7">
                                                <h4 style="text-align: left;font-weight: bold">Danh sách đơn hàng bạn đã đặt</h4>
                                            </th>
                                        </tr>
                                        <tr>
                                            <th><h5 style="font-weight: bold">Ngày đặt</h5></th>
                                            <th><h5 style="font-weight: bold">Tên người nhận</h5></th>
                                            <th><h5 style="font-weight: bold">Địa chỉ</h5></th>
                                            <th><h5 style="font-weight: bold">Số điện thoại</h5></th>
                                            <th><h5 style="font-weight: bold">Nội dung</h5></th>
                                            <th><h5 style="font-weight: bold">Giá</h5></th>
                                            <th><h5 style="font-weight: bold">Trạng thái</h5></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="order : ${vm.getListOrders()}" th:if="${order.getUsername() == user.getUsername()}">
                                            <td th:text="${order.getCreatedDate()}"></td>
                                            <td th:text="${order.getName()}"></td>
                                            <td th:text="${order.getAddress()}"></td>
                                            <td th:text="${order.getPhone()}"></td>
                                            <td>
                                                <span th:each="orderProduct : ${vm.getListOrderProducts()}"
                                                      th:if="${orderProduct.getOrder().getId() == order.getId()}"
                                                      th:text="${orderProduct.getAmount()} + ' ' + ${orderProduct.getProduct().getName()} + ' ,'"></span>
                                            </td>
                                            <td th:text="${order.getPrice()} + ' VND'"></td>
                                            <td th:text="${order.getStatus()}"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="menu2" class="tab-pane fade">
                <div class="container">
                    <div class="row">
                        <div class="col lg-12 col-md-12 col-xs-12 col-md-offset-0">
                            <div class="panel panel-info">
                                <div class="panel panel-heading">
                                    <div class="panel-title" style="font-weight: bold">Gửi Feedback</div>
                                </div>
                                <div class="panel panel-body">
                                    <div class="form-block margin-bottom-15">
                                        <label for="penname">Tên người gửi: </label>
                                        <input type="name" placeholder="Tên người gửi..." id="penname"
                                               required="required" style="width: 100%; padding-left: 10px">
                                    </div>
                                    <div class="form-block margin-bottom-15">
                                        <label for="mail2">Email: </label>
                                        <input type="email" placeholder="Email..." id="mail2"
                                               required="required" style="width: 100%; padding-left: 10px">
                                    </div>
                                    <div class="form-block margin-bottom-15">
                                        <label for="content">Nội dung: </label>
                                        <textarea name="" id="content" style="width: 100%" rows="10"></textarea>
                                    </div>
                                    <button class="btn btn-success btn-feedback">Gửi phản hồi</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<div id="modal-edit-info" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Chỉnh sửa thông tin cá nhân</h4>
            </div>

            <div class="modal-body">
                <div class="img-select-block margin-bottom-15">
                    <label>Ảnh đại diện: </label>
                    <br>
                    <img id = "preview-avatar" th:src="@{../img/default-face.png}" alt="" style="width: 100px; height: 100px">
                    <input type="file" id="input-select-img-avatar">
                </div>
                <div class="form-block margin-bottom-15">
                    <label>Họ và tên: </label>
                    <input type="text" class="form-control" id="input-name">
                </div>
                <div class="form-block margin-bottom-15">
                    <label>Tên đăng nhập: </label>
                    <input type="text" class="form-control" id="input-username">
                </div>
                <div class="form-block margin-bottom-15">
                    <label>Giới tính: </label>
                    <select class="form-control" id="input-gender">
                        <option>Nam</option>
                        <option>Nữ</option>
                        <option>Khác</option>
                    </select>
                </div>
                <div class="form-block margin-bottom-15">
                    <label>Địa chỉ: </label>
                    <input type="text" class="form-control" id="input-address">
                </div>
                <div class="form-block margin-bottom-15">
                    <label>Số điện thoại: </label>
                    <input type="text" class="form-control" id="input-phone">
                </div>
                <div class="form-block margin-bottom-15">
                    <label>Email: </label>
                    <input type="email" class="form-control" id="input-email">
                </div>
                <div class="form-block margin-bottom-15">
                    <label>Thời gian thay đổi: </label>
                    <div class='input-group date' id='datepicker-created-date-user'>
                        <input type="text" class="form-control"/>
                        <span class="input-group-addon">
                                <span class="fa fa-calendar"></span>
                            </span>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-success btn-save-info"> Chỉnh sửa</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Thoát</button>
            </div>
        </div>
    </div>
</div>

<div th:replace="fragments/footer :: footer"></div>


<!--Start of Tawk.to Script-->
<script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
        var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
        s1.async=true;
        s1.src='https://embed.tawk.to/5b475f464af8e57442dc942a/default';
        s1.charset='UTF-8';
        s1.setAttribute('crossorigin','*');
        s0.parentNode.insertBefore(s1,s0);
    })();
</script>
<!--End of Tawk.to Script-->
</body>
</html>